!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTimeAsTotalMinutes=function(e){var t=e.split(":");return 60*parseInt(t[0],10)+parseInt(t[1],10)},t.formatTime=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n),a=[],r=function(e){e<10?a.push("0"+e):a.push(e)};return r(t),r(n),r(i),a.join(":")}},,,,,,,,,,function(e,t,n){"use strict";var i=n(11),a=n(14),r=document.getElementById("schedule");new i.ScheduleList(r,new a.LocalStarStorage(localStorage)).startDownload()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleList=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(12);t.ScheduleList=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.localStarStorage=n,this.items=[]}return i(e,[{key:"startDownload",value:async function(){var e=await fetch("/schedule/list"),t=await e.json();e.ok?this.downloadDone(t):this.downloadFailed()}},{key:"downloadDone",value:function(e){this.addAll(e.schedule)}},{key:"downloadFailed",value:function(){alert("Could not retrieve schedule data at this time. Please try again later.")}},{key:"addAll",value:function(e){e.forEach(this.add,this)}},{key:"add",value:function(e){var t=new a.ScheduleItem(e,this.localStarStorage);this.items.push(t),this.element.appendChild(t.element)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleItem=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(13),r=n(0);t.ScheduleItem=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.tracks=t.tracks,this.localStarStorage=n,this.scheduleItemTemplate=new a.HtmlTemplate("schedule-item"),this.element=this.scheduleItemTemplate.createElement(t),this.starredClass="starred",n.isStarred(this.id)&&this.element.classList.add(this.starredClass),this.initializeElementClass(),this.initializeElementPosition(t.start,t.end),this.addStarClickEventHandler()}return i(e,[{key:"initializeElementClass",value:function(){this.isInTrack(1)&&this.isInTrack(2)?this.element.classList.add("both-tracks"):this.isInTrack(1)?this.element.classList.add("track-1"):this.isInTrack(2)&&this.element.classList.add("track-2")}},{key:"initializeElementPosition",value:function(e,t){var n=(0,r.parseTimeAsTotalMinutes)(e),i=(0,r.parseTimeAsTotalMinutes)(t);this.element.style.top=2*(n-510)+"px",this.element.style.height=2*(i-n)+"px"}},{key:"addStarClickEventHandler",value:function(){this.element.querySelector(".star").addEventListener("click",this.toggleStar.bind(this),!1)}},{key:"isInTrack",value:function(e){return this.tracks.indexOf(e)>=0}},{key:"toggleStar",value:function(){this.isStarred()?this.unsetStar():this.setStar()}},{key:"isStarred",value:function(){return this.element.classList.contains(this.starredClass)}},{key:"unsetStar",value:function(){this.element.classList.remove(this.starredClass),this.postStarChange(!1),this.localStarStorage.removeStar(this.id)}},{key:"setStar",value:function(){this.element.classList.add(this.starredClass),this.postStarChange(!0),this.localStarStorage.addStar(this.id)}},{key:"postStarChange",value:async function(e){var t={method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"starred="+e},n=await fetch("/schedule/star/"+this.id,t);if(e&&n.ok){var i=await n.json();this.updateStarCount(i.starCount),i.starCount>50&&alert("This session is very popular! Be sure to arrive early to get a seat.")}}},{key:"updateStarCount",value:function(e){this.element.querySelector(".star-count").textContent=e.toString()}},{key:"show",value:function(){this.element.style.display="block"}},{key:"hide",value:function(){this.element.style.display="none"}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.HtmlTemplate=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.createElement("div");n.innerHTML=this.getTemplateHtml(t),this.templateElement=this.findTemplateElementInDiv(n)}return i(e,[{key:"createElement",value:function(e){var t=this.templateElement.cloneNode(!0);return this.dataBindElement(t,e),t}},{key:"getTemplateHtml",value:function(e){return document.getElementById(e).textContent}},{key:"findTemplateElementInDiv",value:function(e){for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t}},{key:"dataBindElement",value:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],a=e.querySelector("[data-bind="+n+"]");a&&(a.textContent=i.toString())}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.LocalStarStorage=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localStorage=t,this.load()}return i(e,[{key:"addStar",value:function(e){this.isStarred(e)||(this.sessions.push(e),this.save())}},{key:"removeStar",value:function(e){var t=this.sessions.indexOf(e);t>=0&&(this.sessions.splice(t,1),this.save())}},{key:"isStarred",value:function(e){return this.sessions.indexOf(e)>=0}},{key:"load",value:function(){var e=this.localStorage.getItem("stars");if(e)try{this.sessions=JSON.parse(e)||[]}catch(e){this.sessions=[]}else this.sessions=[]}},{key:"save",value:function(){this.localStorage.setItem("stars",JSON.stringify(this.sessions))}}]),e}()}]);
//# sourceMappingURL=schedule.bundle.js.map